Dtrace to the rescue! Though it is hard using the pid provider on C++ code 